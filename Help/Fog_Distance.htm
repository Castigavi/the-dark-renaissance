<HTML><HEAD><TITLE>Fog Distance</TITLE></HEAD>
<BODY TEXT=#000000 BGCOLOR=#FFFFC0 LINK=#0000FF ALINK=#0000FF VLINK=#000080> 
<BASEFONT SIZE=3>
<FONT COLOR=#FF0000>
<CENTER><H1>Fog Distance</H1></CENTER></FONT>
<B><A HREF="#LINK2">Enable the Distance Fog</A> <BR>
<A HREF="#LINK3">The image for reference</A> <BR>
<A HREF="#LINK4">Tips & Tricks: the diagnostic for Fog</A> <BR>
<A HREF="#LINK5">Start Fog setting</A> <BR>
<A HREF="#LINK6">End Fog Setting</A> <BR>
<A HREF="#LINK7">Increase the Density of Fog</A> <BR>
<A HREF="#LINK8">Get a very short visibility</A> <BR>
<A HREF="#LINK9">Dynamic Fog Effects: Desert Storm 1</A> <BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="#LINK10">Desert Storm 2</A> <BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="#LINK1">how change the trigger settings directly in the script.txt file</A> <BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="#LINK11">The Pulse Dynamic Effect</A> <BR>
<A HREF="#LINK12">How Fix the Bug about Water Color</A> <BR>
<A NAME="LINK2"></A><BR>
<BR><HR WIDTH=90%><BR><FONT COLOR=#FF0000><CENTER><H2>Enable the Distance Fog</H2></CENTER></FONT>To enable the Fog Distance you need to type in your script.txt following commands:<BR>
<BR>
[Level]<BR>
<BR>
ForceVolumetricFX= DISABLED  ;Disable VolFx and enable distance fog<BR>
Fog=&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;255,255,255   ;Set the color of the fog<BR>
FogRange=&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-20, 10   ;set the start and end range for distance fog<BR>
<BR>
You can set different values about fog= color and FogRange=, of course.<BR>
<BR>
In this tutorial we'll see the most interesting settings for above commands.<BR>
 <A NAME="LINK3"></A> <BR>
<BR><HR WIDTH=90%><BR><FONT COLOR=#FF0000><CENTER><H2>The image for reference</H2></CENTER></FONT><CENTER><IMG SRC="shot0.jpg"  VSPACE=12 ALIGN="CENTER" ></CENTER> <BR>
Above image is the scene we'll use to apply different fog settings.<BR>
It is a room of Cleopatre's Palace, where I removed all lights and shadows to avoid confusion with the fog settings we'll apply.<BR>
All rooms have an ambient light of  128,128,128, and also this choice has been taken to avoid further confusion  with fog color.<BR>
 <A NAME="LINK4"></A> <BR>
<BR><HR WIDTH=90%><BR><FONT COLOR=#FF0000><CENTER><H2>Tips & Tricks: the diagnostic for Fog</H2></CENTER></FONT><CENTER><IMG SRC="shot16.jpg"  VSPACE=12 ALIGN="CENTER" ></CENTER> <BR>
If you enabled the diagnostic in [Option] section of script.txt, you can see also new values about fog distance. <BR>
You can see FogStart, EndFog and all RGB color of fog.<BR>
This feature is interesting to monitor some dynamic fog effects, but also to help you to choose the best fog settings in real time. <BR>
<BR>
You have some short-cuts to modify all setting for fog:<BR>
<BR>
The 'S' key allows to modify the StartFog value. You can type in same moment the F1 key to reduce the StartFog, or the F2 key to increase it.<BR>
The 'E' key changes the EndFog value. You have to keep down E key and then hit F1 to reduce or F2 to increase the end fog value.<BR>
You can also change the current color of fog using the key 'R', 'G', and 'B', for Red, Green and Blue intensity, togheter with F1 or F2 key in similar way of fog limits.<BR>
<BR>
Tip: if you are testing some dynamic effect it's probably you'll have to perform a lot of attemptes before finding the wished result. To reduce the time of these attempt it's better you place in level only a "Perform triggergroup" trigger, and then type in script.txt the trigger to enabled the dynamic effect.<BR>
In this way you'll be able to modify only the script.txt and click [Build] to perform another attempt with different value and this operation is faster than build the level with output wad and tom2pc conversion.<BR>
See <A HREF="#LINK1">how change the trigger settings directly in the script.txt file</A> .<BR>
 <A NAME="LINK5"></A> <BR>
<BR><HR WIDTH=90%><BR><FONT COLOR=#FF0000><CENTER><H2>Start Fog setting</H2></CENTER></FONT><CENTER><IMG SRC="shot1_2.jpg"  VSPACE=12 ALIGN="CENTER" ></CENTER> <BR>
Above images have the same value for color (Fog=0,255,255)  and  End-Fog (8 sectors), while the only difference is the beginning of fog, set with StartFog settings.<BR>
In left image the start fog is  -2 (negative value), while at right is 0.<BR>
Above images allow to understand because it's important set a negative value for Start Fog.<BR>
If you type a 0 value (like in right image), Lara is fully out of the fog, and this is not realistic in a fogged ambient.<BR>
 <A NAME="LINK6"></A> <BR>
<BR><HR WIDTH=90%><BR><FONT COLOR=#FF0000><CENTER><H2>End Fog Setting</H2></CENTER></FONT><CENTER><IMG SRC="shot3_4.jpg"  VSPACE=12 ALIGN="CENTER" ></CENTER> <BR>
The EndFog setting (i.e. the second value you type in FogRange= command) set from where the fog is so dense to toggle any visibility.<BR>
In above pictures the EndFog is 12, and you can compare with previous couple of pictures, that in this case the view is more far, reaching the more far wall of this room.<BR>
<BR>
The only difference of above images is the fog color (Fog=0,255,255) for left image, while a black color (fog=0,0,0) for right image.<BR>
<BR>
When you use the black color is not easy understand that the effect is a fog distance, anyway the result could be ideal to simulate an outside nighty ambient where lara is able to see only to short distance like it should happen in the night, for example under a moon light.<BR>
 <A NAME="LINK7"></A> <BR>
<BR><HR WIDTH=90%><BR><FONT COLOR=#FF0000><CENTER><H2>Increase the Density of Fog</H2></CENTER></FONT><CENTER><IMG SRC="shot6_7.jpg"  VSPACE=12 ALIGN="CENTER" ></CENTER> <BR>
If you modify the Start-Fog, reducing its value, you get a most density of fog.<BR>
In above pictures, at left we have a start-fog  = -2, while at right is  -16.<BR>
The End-Fog is the same for both images (= 14)<BR>
You can see as in right image there is more fog color, altough the last visibility (in bottom of room) is almost the same because end-fog has not been changed.<BR>
 <A NAME="LINK8"></A> <BR>
<BR><HR WIDTH=90%><BR><FONT COLOR=#FF0000><CENTER><H2>Get a very short visibility</H2></CENTER></FONT><CENTER><IMG SRC="shot8_9.jpg"  VSPACE=12 ALIGN="CENTER" ></CENTER> <BR>
If you reduce drammatically the End-Fog value, you get a very short visibility for lara (and the player)<BR>
It's a suggestive effect to explore misterious sites.<BR>
The fog ranges are : for left image FogRange= -2, 5 , while for right image is FogRange=-11, 5.<BR>
In right image you can see an effect of deep night, anyway in a static image it's not easy understand the suggestion you get in a dynamic action. <BR>
Lara will have a very short visibility but all reamining of the ambient is the dark. Lara moving her will be always with same short visibility, seeing further zones of room only when she is very closed to them.<BR>
This effect is better than a simply reducing of ambient light, or placing some shadow, because in these cases the dark zones are still, always in same position, while with a black deep fog, lara will be always encirlced by the dark, but she will have always a bit of visibility closed to her.<BR>
 <A NAME="LINK9"></A> <BR>
<BR><HR WIDTH=90%><BR><FONT COLOR=#FF0000><CENTER><H2>Dynamic Fog Effects: Desert Storm 1</H2></CENTER></FONT><CENTER><IMG SRC="shot10_11.jpg"  VSPACE=12 ALIGN="CENTER" ></CENTER> <BR>
From 1.2.1.0  version, have been added other flipeffect trigger for distance fog:<BR>
<BR>
"Weather. Fog. Change Start limit of Distance Fog in &lt;&&gt;way with (E)speed"<BR>
"Weather. Fog. Change End limit of Distance Fog in &lt;&&gt;way with (E)speed"<BR>
Both flipeffect change a parameter of fog (start or end fog) in random (or pulse) mode with a given speed.<BR>
The target of Random way is to simulate a variable density of the fog like it could happen in a desert storm, where the visibility changes, from moment to moment, in according with further clouds of sand (or dust) passing in front of Lara.<BR>
If you choose correct settings you can give really the idea of cloudes moving in the ambient and it's an amazing effect in particular way if you use a wind-sound as background music.<BR>
<BR>
In above pictures you can see two moments of automatic (end-less, if you wish) changing of fog density.<BR>
For this example it has been used this trigger:<BR>
<BR>
; &lt;#&gt; : Weather. Fog. Change Start limit of Distance Fog in &lt;&&gt;way with (E)speed<BR>
; &lt;&&gt; : RANDOM way - Huge Intensity (16 sectors)<BR>
; (E) : Middle  (3 seconds)<BR>
<BR>
Starting from a FogRange= -16, 8 setting.<BR>
This first example of variation of fog density has been get modifying the start-fog value.<BR>
You should remember that, to get visible result with start-fog, you should use wide range (in above example I used "Huge Intensity (16 sectors)) but when you change the end-fog value the speech is different...<BR>
 <A NAME="LINK10"></A> <BR>
<BR><HR WIDTH=90%><BR><FONT COLOR=#FF0000><CENTER><H2>Desert Storm 2</H2></CENTER></FONT><CENTER><IMG SRC="shot12_13.jpg"  VSPACE=12 ALIGN="CENTER" ></CENTER> <BR>
If we use the other trigger to simulate desert-storm, that to change End-fog value:<BR>
<BR>
"Weather. Fog. Change End limit of Distance Fog in &lt;&&gt;way with (E)speed"<BR>
<BR>
We get a variation a bit different than first example. See above pictures.<BR>
In this case, in fact, some zones in front of lara will disappear or reappear, like if a very deep cloude moved in front of lara, but at some distance from her.<BR>
<BR>
To get above effect I used this trigger:<BR>
<BR>
; &lt;#&gt; : Weather. Fog. Change End limit of Distance Fog in &lt;&&gt;way with (E)speed<BR>
; &lt;&&gt; :  2 RANDOM way - Middle Intensity (2 sectors)<BR>
; (E) : 2.0 Fast   (2 seconds)<BR>
<BR>
Starting from a setting of:  FogRange= -2, 4<BR>
<BR>
As you can see, when you change the End-Fog value in dynamic way it's better using a short Intensity (I used "2 sectors") otherwise the effect could be very weird in game.<BR>
It's probably that, the better results could be get using both desert storm effects in same time: modifying start-fog and end-fog in same time, you should get a more realisitch chaotic modifying in this storm.<BR>
<BR>
 <A NAME="LINK1"></A> <BR>
<FONT COLOR=#000000><H3>How speed the ajusting of Dynamic parameters</H3></FONT>Since you'll have to do many attempts before find the wished setting for your dynamic effect, you can reduce the times with a little trick.<BR>
Instead of opening NGLE, modify the trigger flipeffect, and convert newly your level, you can place in level only a trigger to perform a triggergroup typed in script.txt.<BR>
In this way you have no need to launch ngle and build the level every time, and it will just you change only the setting in script.txt file,  saving a lot of time.<BR>
To modify the exported trigger just you work on last of three numbers:<BR>
<BR>
; Exporting: TRIGGER(769:0) for FLIPEFFECT(228)<BR>
; &lt;#&gt; : Weather. Fog. Change End limit of Distance Fog in &lt;&&gt;way with (E)speed<BR>
; &lt;&&gt; :  2 RANDOM way - Middle Intensity (2 sectors)<BR>
; (E) : 2.0 Fast   (2 seconds)<BR>
; Values to add in script command: $2000, 228, $301<BR>
<BR>
TriggerGroup=   1,  $2000, 228, $301<BR>
<BR>
In the level you'll have a flipeffect trigger to perform the TriggerGroup=1.<BR>
Now to change the values of above exported trigger, just you change the $301 number remembering that the lower digit "1" is the timer value, i.e. the "&lt;&&gt;way" mode,  while if you want change the "(E)speed" you have to modify the first digit from left (currently it is the "3")<BR>
<BR>
You can use this list to discover the values to type:<BR>
"&lt;&&gt; Way", to type in  $ooX digit:<BR>
<TT><BR>
0: 1 RANDOM way - Low Intensity (1 sector)<BR>
1: 2 RANDOM way - Middle Intensity (2 sectors)<BR>
2: 4 RANDOM way - High Intensity  (4 sectors)<BR>
3: 8 RANDOM way - Very high Intensity (8 sectors)<BR>
4:16 RANDOM way - Huge Intensity (16 sectors)<BR>
5:32 RANDOM way - Max Intensity (32 sectors)<BR>
8: 1 PULSE way -  Low Intensity (1 sector)<BR>
9: 2 PULSE way - Middle Intensity (2 sectors)<BR>
A: 4 PULSE way - High Intensity (4 sectors)<BR>
B: 8 PULSE way - Very high Intensity (8 sectors)<BR>
C:16 PULSE way - Huge Intensity (16 sectors)<BR>
D:32 PULSE way - Max Intensity (32 sector)<BR>
</TT><BR>
<BR>
While for (E)speed to type in $Xoo digit:<BR>
<BR>
<TT><BR>
0:6.0 Very Slow  (6 seconds)<BR>
1:4.0 Slow  (4 seconds)<BR>
2:3.0 Middle  (3 seconds)<BR>
3:2.0 Fast   (2 seconds)<BR>
4:1.0 Very Fast (1 second)<BR>
5:0.5 Ultra Fast (0.5 seconds)<BR>
</TT><BR>
<BR>
In above list you have to read the first character, that is at left of ":" character.<BR>
For example if you want set the effect with these settings:<BR>
<BR>
2: 4 RANDOM way - High Intensity  (4 sectors)<BR>
<BR>
and<BR>
<BR>
4:1.0 Very Fast (1 second)<BR>
<BR>
You'll change the last number of TriggerGroup in this way:<BR>
<BR>
$402 <BR>
<BR>
because the "4" is for "4:1.0 Very Fast (1 second)", while the "2" is for "2: 4 RANDOM way - High Intensity  (4 sectors)"<BR>
So, in above case, the triggergroup will become:<BR>
<BR>
TriggerGroup=   1,  $2000, 228, $402<BR>
<BR>
Now just you click on [Build] button and then start Tomb to try the new setting.<BR>
 <A NAME="LINK11"></A> <BR>
<FONT COLOR=#000000><H3>The Pulse Dynamic Effect</H3></FONT>About the PULSE mode, it's not advisable to simulate natural events, because with pulse, the density or the end-fog change in regular way, from minimum value to max.<BR>
For this reason you could use the PULSE effect only to simulate weird light effects closed to misterious machines, alien-ships or other mechanical engines. In these situation it's better use colored fog and not a simply white fog color, like for the desert storm examples.<BR>
 <A NAME="LINK12"></A> <BR>
<BR><HR WIDTH=90%><BR><FONT COLOR=#FF0000><CENTER><H2>How Fix the Bug about Water Color</H2></CENTER></FONT><CENTER><IMG SRC="shot14.jpg"  VSPACE=12 ALIGN="CENTER" ></CENTER> <BR>
When you use the distance fog in all transparent textures born the problem of excessive saturation with fog color.<BR>
Since this saturation is really excessive I tried to create a fixing.<BR>
You can enable this fixing typing in [Level] section (or [Title] section to extend to all levels) the command:<BR>
<BR>
Customize=&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CUST_FIX_WATER_FOG_BUG, ENABLED<BR>
<BR>
When above command is present the fog will be removed by transparent textures, on objects or from water textures.<BR>
<BR>
 <CENTER><IMG SRC="shot15.jpg"  VSPACE=12 ALIGN="CENTER" ></CENTER> <BR>
<BR>
How you can see, the transparent texture of object came back to correct reflection, and also the water seems normal.<BR>
<BR></B></BODY></HTML>
